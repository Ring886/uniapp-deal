"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("uni-easyinput")()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+a)();const a=()=>"../../components/item-preview/item-preview.js",i={__name:"search",setup(a){const i=e.ref("");e.ref(!1);const n=e.ref([]),t=e.ref(1),o=e.ref([]),s=e.ref(!1);function l(){e.index.showNavigationBarLoading();const a=o.value.length,i=Math.max(a-6*t.value,0),s=a-6*(t.value-1),l=o.value.slice(i,s).reverse();n.value.push(...l),t.value++,e.index.hideNavigationBarLoading(),e.index.stopPullDownRefresh()}async function u(){n.value=[],t.value=1,o.value=[],e.index.showLoading({title:"加载中"}),await(console.log("take getimgArr"),new Promise(((a,n)=>{e.index.request({url:"https://dwdeal.cn/search",method:"POST",data:{value:i.value},success:e=>{o.value=e.data.items,console.log("getimgArr is",o.value),a()},fail:e=>{console.log("获取图片数组失败",e),n(e)}})}))),l(),e.index.hideLoading(),0===o.value.length&&e.index.showToast({title:`没有找到关于${i.value}的帖子`,icon:"none"})}return e.onReachBottom((()=>{n.value.length===o.value.length&&(s.value=!0,e.index.showToast({title:"没有更多了",icon:"none"}),setTimeout((()=>{}),1e3)),s.value||l()})),(a,t)=>({a:e.o(u),b:e.o((e=>i.value=e)),c:e.p({suffixIcon:"search",placeholder:"请输入内容",modelValue:i.value}),d:e.f(n.value,((a,i,n)=>({a:a.id,b:a.id,c:"e8c8cc43-1-"+n,d:e.p({_id:a._id,src:a.src,detail:a.detail,id:a.id,views:a.views,date:a.date})})))})}},n=e._export_sfc(i,[["__scopeId","data-v-e8c8cc43"]]);wx.createPage(n);
